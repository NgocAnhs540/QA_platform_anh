## Controls

### Định nghĩa

Controls là các hành động, điều kiện logic… sử dụng trong cấu hình để thực hiện điều khiển ứng dụng đang test.

Controls bao gồm: Action, Control, Variable, Operator & others

![cont1](/test-framework-api/guest/doc-file/doc-file/7d445cfa-89d4-4209-82fa-4eb6ed58e7d8/cont1.png)

Một control có 2 phần:
1.	Tên control
2.	Các platform được sử dụng control

### Cấu trúc của controls

Trong mỗi control thường có các thông tin:

Tên controls: thể hiện mục đích của controls lên phần tử như Click, xoá và nhập, tìm kiếm, lựa chọn…

Description: Mô tả, diễn giải hành động của controls

Các thuộc tính cần khai báo để controls có thể thực hiện hành động lên element như:  Variable: parentElement, Variable: xpath…

Tuỳ thuộc vào tính năng của mỗi controls mà có các thuộc tính khác nhau.

![cont2](/test-framework-api/guest/doc-file/doc-file/e6592e2c-748d-4b69-8528-dd4ba4ac756a/cont2.png)

*Cấu trúc của controls “Child Element Clear and Send Keys"*

### Thuộc tính của controls

Thuộc tính của Element là đặc điểm, thông tin của phần tử trên ứng dụng bao gồm vị trí (xpath), giá trị (value), tên, định dạng (input, button…)

Các loại thuộc tính cơ bản:
-	Variable: xpath
-	Variable: parentElement
-	Variable: value
-	Return Type

#### Variable Xpath

Là thuộc tính cấu hình địa chỉ của Element/ phần tử

![cont3](/test-framework-api/guest/doc-file/doc-file/af24b395-b021-442b-b105-cc1bfc616b4e/cont3.png)

Cấu trúc của variable Xpath

*Type*

| Type |	Cấu hình |
| ----- | ----- |
| Value | Cấu hình địa chỉ xpath của element |
| Variable |	Cấu hình sử dụng tên của một tham số đã tạo trong test case |
| Version_variable |	Cấu hình sử dụng một tham số trong danh sách tham số có sẵn của project |

*Data type*

| Data type |	Cấu hình |
| ----- | ----- |
| WebElement | Cấu hình địa chỉ (xpath) của element |
| RepositoryElement |	Cấu hình sử dụng các Element đã được định nghĩa sẵn trên project |
| Password |	Cấu hình dữ liệu nhập vào sẽ hiển thị dưới dạng bảo mật |

*Khác*

| Khác |	Cấu hình |
| ----- | ----- |
| Name | Nhập tên của tham số (chỉ hiển thị với Type là variable/ version_variable/ node_variable) |
| Value |	Nhập xpath (chỉ hiển thị với type là value) |
| Test element |	Hiển thị địa chỉ xpath trong thư viện repository (chỉ hiển thị khi Data type là RepositoryElement) |

- Type = “Value”: được sử dụng để tìm x-path
- 
![cont4](/test-framework-api/guest/doc-file/doc-file/e85f1c64-3587-4551-b61e-dc547c2be170/cont4.png)

*Cách 1: Sử dụng **“Find element”**. Tìm kiếm phần tử trên webElement.*
Hiển thị màn hình Find element property.

![cont5](/test-framework-api/guest/doc-file/doc-file/69dc5ee5-340c-4198-868f-33eaa3758470/cont5.png)

Chọn loại WebElement mong muốn. Hệ thống hiển thị danh sách element tương ứng hiện có trên màn hình của trang web đang chạy.

![cont6](/test-framework-api/guest/doc-file/doc-file/00290fe9-54ba-4869-a898-93ddd5318a2a/cont6.png)

Tìm element mong muốn và chọn x-path.

![cont7](/test-framework-api/guest/doc-file/doc-file/4eb37cb6-55f2-4dfc-9c3b-123760e383e3/cont7.png)

*Cách 2: Sử dụng **“Find value”** tìm kiếm thuộc tính mẫu. Click nút “Find value”*

Cho phép tìm value mẫu có sẵn trong hệ thống. Chọn Template Type hoặc nhập Template Name muốn tìm sau đó click nút “Search”. 

![cont8](/test-framework-api/guest/doc-file/doc-file/e2000762-095a-4ad6-a863-ab0f4fff4a24/cont8.png)

*Cách 3: Sử dụng Element Repository*
Tại trường Data Type, chọn RepositoryElement, click Element Repository

![cont9](/test-framework-api/guest/doc-file/doc-file/253b6a2e-0b81-4ed0-9206-99ea5e7c3007/cont9.png)

Click vào Element cần dùng, Test element hiển thị đường dẫn đến element trên thư viện Repository

![cont10](/test-framework-api/guest/doc-file/doc-file/4caa3c83-dd56-446d-af41-87b85b26a304/cont10.png)

![cont11](/test-framework-api/guest/doc-file/doc-file/edde35e9-99e0-404c-8c9c-d14cf3567de4/cont11.png)

*Cách 4: Nhập thủ công giá trị xpath của element (xem thêm Xpath)*

- Type = “variable”: được sử dụng để tạo/truyền tham số

![cont12](/test-framework-api/guest/doc-file/doc-file/125eb147-15a1-4914-87d9-b34772aa01b5/cont12.png)

- Type = “version_ variable”: sử dụng các variable chung của toàn project. Chi tiết về version_variable đọc thêm phần < Parameter cho project>.

> *Note: Phải nhập name đúng với tên của parameter người dùng muốn sử dụng.*

![cont13](/test-framework-api/guest/doc-file/doc-file/06c04113-a41b-4816-b642-06bc2e0a0c78/cont13.png)

#### Variable Value

Là thuộc tính tạo tham số cho Element

![cont14](/test-framework-api/guest/doc-file/doc-file/3b13fddf-a599-42e5-b7a1-6c9aee169390/cont14.png)

Cấu phần của Variable Value

*Type*

| Type |	Cấu hình |
| ----- | ----- |
| Value | Thường đi với các dataType là WebElement, RepositoryElement, Password, String,… Datetime. Cấu hình dữ liệu nhập mặc định cho ô input text |
| Variable |	Thường đi với các dataType là CallOutput, String, ..., Datetime, Password. Cấu hình tạo tham số cho element |
| Version_variable |	Cấu hình sử dụng một tham số trong danh sách tham số có sẵn của project |

*Data type*

| Data type |	Cấu hình |
| ----- | ----- |
| CallOutput | Gọi các tham số cấu hình dưới dạng output để sử dụng |
| String, Integer, Long, Double, Float, Date, Datetime: |	 |
| RepositoryElement |	Cấu hình sử dụng các Element đã được định nghĩa sẵn trên project |
| WebElement |	Cấu hình địa chỉ (xpath) của element |
| Password |	Cấu hình dữ liệu nhập vào sẽ hiển thị dưới dạng bảo mật |

*Khác*

| Khác |	Cấu hình |
| ----- | ----- |
| Name | Nhập tên của tham số (chỉ hiển thị với Type là variable/ version_variable/ node_variable) |
| Value |	Nhập giá trị của element (chỉ hiển thị với type là value) |
| Test element |	Hiển thị địa chỉ xpath trong thư viện repository (chỉ hiển thị khi Data type là RepositoryElement) |

- Type = “variable”: Tạo tham số cho element vừa tìm được
- 
![cont15](/test-framework-api/guest/doc-file/doc-file/ba354476-e143-433f-aac9-2b605cdf7e48/cont15.png)

- Type = “value”: nhập dữ liệu cho element vừa tìm hay nhập giá trị cho biến vừa tạo ở phần Variable:x-path

![cont16](/test-framework-api/guest/doc-file/doc-file/470d1809-2ebc-453a-aff0-7244c736bb61/cont16.png)

- Type = “version_ variable”: sử dụng các variable chung của toàn project. Chi tiết về version_variable đọc thêm phần <Parameter cho project>.
> *Note: Phải nhập name đúng với tên của parameter người dùng muốn sử dụng.*

#### Variable parentElement

Là thuộc tính cấu hình thành phần cha của một Element nào đó (xuất hiện trong các control thực hiện lên Child Element)

![cont17](/test-framework-api/guest/doc-file/doc-file/1368ae49-5440-4276-8441-818efc0f5f98/cont17.png)

Cấu phần của Variable ParentElement

*Type*

| Type |	Cấu hình |
| ----- | ----- |
| Variable |	Cấu hình sử dụng một tham số là cha của element đang tìm |
| Version_variable |	Cấu hình sử dụng một tham số trong danh sách tham số có sẵn của project |

*Data type*

| Data type |	Cấu hình |
| ----- | ----- |
| WebElement |	Cấu hình sử dụng tham số là cha của element đang tìm |
| RepositoryElement |	Cấu hình sử dụng các Element đã được định nghĩa sẵn trên project (thường không sử dụng khi cấu hình parentElement) |
| Password |	Cấu hình dữ liệu nhập vào sẽ hiển thị dưới dạng bảo mật (thường không sử dụng khi cấu hình parentElement) |

*Khác*

| Khác |	Cấu hình |
| ----- | ----- |
| Name | Nhập tên của tham số (chỉ hiển thị với Type là variable/ version_variable/ node_variable) |

- Type = “variable”, “version_variable”: nhập tên chính xác của phần tử cha của phần tử hiện tại.

![cont18](/test-framework-api/guest/doc-file/doc-file/d30f909d-6c64-4208-bed2-0820150bfdc6/cont18.png)

#### Variable returnType

Là thuộc tính gán Element tìm được cho 1 tham số mới

![cont19](/test-framework-api/guest/doc-file/doc-file/0416d832-4db8-4dd8-be11-6eccc274127a/cont19.png)

Cấu phần của Variable returnType:

*Type*

| Type |	Cấu hình |
| ----- | ----- |
| None |	Không có cấu hình dữ liệu trả về |
| Variable |	Cấu hình này sẽ có kiểu dữ liệu trả về là một tham số. Gán kết quả vừa tìm được cho 1 tham số và bắt buộc phải tạo paramerter hoặc output |
| newVariable |	Cấu hình dữ liệu trả về là một tham số mới. Có thể hiểu là gán kết quả vừa tìm được cho 1 tham số mới và tham số này sẽ không cần cấu hình tạo parameter mới |
| version_variable |	Cấu hình dữ liệu trả về là một tham số chung của hệ thống |


*Data type*

| Data type |	Cấu hình |
| ----- | ----- |
| CallOutput |	Cấu hình sử dụng tham số là cha của element đang tìm |
| String, Integer, Long, Double, Float, Date, Datetime: |	Cấu hình sử dụng các Element đã được định nghĩa sẵn trên project (thường không sử dụng khi cấu hình parentElement) |
| RepositoryElement |	Cấu hình dữ liệu nhập vào sẽ hiển thị dưới dạng bảo mật (thường không sử dụng khi cấu hình parentElement) |
| WebElement |	Cấu hình dữ liệu nhập vào sẽ hiển thị dưới dạng bảo mật (thường không sử dụng khi cấu hình parentElement) |
| Password |	Cấu hình dữ liệu nhập vào sẽ hiển thị dưới dạng bảo mật (thường không sử dụng khi cấu hình parentElement) |

*Islist*

| Islist |	Cấu hình |
| ----- | ----- |
| True/false | Cấu hình giá trị tìm được có phải là một danh sách hay không |

*Khác*

| Khác |	Cấu hình |
| ----- | ----- |
| Name | Nhập/Chọn tên của Tham số |

### Client

| Client | Định nghĩa |
| ------ | ------ |
| ![Client](/test-framework-api/guest/doc-file/doc-file/b59d41e0-a214-42e7-aff0-a1f67956750f/client1.png) | Được sử dụng để tạo client cho testcase |

### Action

Action là các hành động thực hiện trên giao diện của ứng dụng test như Click, Lựa chọn, tìm kiếm, sao chép, truy cập URL, … để thực hiện một bước nào đó trong Testcase.

*Nhóm chức năng SEND KEYS*

| Action |	Chức năng (tool tip) |
| ----- | ----- |
| Clear and Send Keys |	Xóa bỏ nội dung hiện tại của một trường nhập liệu và gửi một chuỗi mới vào đó để thay thế |
| Child Element Clear and Send Keys |	Chức năng giống với Clear and Send Keys nhưng chỉ áp dụng với phần tử con của parentElement |
| Send Key from Element |	Là controls được sử dụng cho hành động nhấn phím Tab, Enter, Escape từ một vị trí Element được xác định |
| Child Element send key from Element |	Giống với Send Key from Element nhưng chỉ áp dụng với phần tử con của parentElement |
| Send Key Without Element |	Sử dụng cho hành động nhấn phím Tab, Enter, Escape mà không cần xác định element |
| Send Keys |	Sử dụng để cấu hình các trường có định dạng input nhưng dữ liệu tại trường thông tin sẽ không được xoá |
| Clear and Send Keys by Position |	Giống với Clear and Send Keys nhưng sử dụng để nhập dữ liệu dựa vào vị trí cụ thể của các element xung quanh nó |
| Send Keys by Position |	Giống với Send Keys nhưng dựa vào vị trí cụ thể của các element xung quanh nó |
| Send Keys without Element |	Thực hiện nhập dữ liệu mà không cần tìm element |
| Clear and Send File |	Cho phép xóa nội dung của một trường nhập liệu định dạng input file và upload một file tới trang web |
| Child Element Clear and Send File |	Giống với Clear and Send File nhưng áp dụng với phần tử con của parentElement |

*Nhóm chức năng FIND*

| Action |	Chức năng (tool tip) |
| ----- | ----- |
| Find Element |	Được dùng để tìm kiếm 1 Element trên ứng dụng/ hệ thống test |
| Child Element Find Element |	Giống với Find Element nhưng chỉ áp dụng với phần tử con của parentElement |
| Find Elements |	Được dùng để tìm kiếm nhiều Element trên ứng dụng/ hệ thống test |
| Child Element Find Elements |	Giống với Find Elements nhưng chỉ áp dụng với phần tử con của parentElement |
| Find Element by Position |	Sử dụng để tìm kiếm nhiều Element dựa trên vị trí của các element xung quanh nó |
| Find Element by Position |	Sử dụng để tìm kiếm 1 element dựa trên vị trí của các element xung quanh nó |

*Nhóm chức năng CLICK*

| Action |	Chức năng (tool tip) |
| ----- | ----- |
| Click |	Cho phép thao tác click vào 1 phần tử bất kỳ |
| Child Element Click |	Giống với Click nhưng chỉ áp dụng với phần tử con của parentElement |
| Click with Offset |	Dùng với trường hợp muốn xét toạ độ của một Element trên màn hình để thực hiện Click |
| Child Element Click with Offset |	Giống với Click with Offset nhưng chỉ áp dụng với phần tử con của parentElement |
| Click by Position |	Cho phép thao tác click vào một phần tử dựa trên vị trí cụ thể của các element xung quanh nó |

*Nhóm chức năng SELECT*

| Action |	Chức năng (tool tip) |
| ----- | ----- |
| Select by Value |	Được dùng để cấu hình các trường có định dạng combobox và dùng value để xác định giá trị cho combobox |
| Child Element Select by Value |	Giống với Select by Value nhưng chỉ áp dụng cho thẻ con của parent Element |
| Select by Visible Text |	Dùng để cấu hình các trường có định dạng combobox và dùng text (visible text) để xác định giá trị cho combobox |
| Child Element Select by Visible Text |	Giống với Select by Visible Text nhưng chỉ áp dụng cho thẻ con của parentElement |
| Select by Value by Position |	Sử dụng để cấu hình các trường có định dạng combobox dựa vào vị trí cụ thể của các element xung quanh nó và dùng thuộc tính “value” để xác định giá trị cho combobox |
| Select by Visible Text by Position |	Sử dụng để cấu hình các trường có định dạng combobox dựa vào vị trí cụ thể của các element xung quanh nó và dùng text (visible text) xác định giá trị cho combobox |
| Select table row |	Chọn một cột ở trong bảng |

*Nhóm chức năng GET TEXT*

| Action |	Chức năng (tool tip) |
| ----- | ----- |
| Get Text |	Cho phép lấy nội dung văn bản (text content) của một phần tử |
| Child Element Get Text |	Giống với Get Text nhưng chỉ áp dụng với thẻ con của parentElement |
| Get Attribute |	Cho phép lấy giá trị của một thuộc tính (attribute) của một phần tử |
| Child Element Get Attribute |	Giống với Get Attribute nhưng chỉ áp dụng với thẻ con của parent Element |

*Nhóm chức năng ALERT*

| Action |	Chức năng (tool tip) |
| ----- | ----- |
| Send keys Alert |	Cho phép nhập nội dung văn bản vào một hộp thoại cảnh báo (alert box) |
| Accept Alert |	Cho phép xác nhận, đồng ý, ... một hộp thoại cảnh báo (alert box) |
| Dismiss Alert |	Cho phép từ chối, hủy bỏ, ... một hộp thoại cảnh báo (alert box) |
| Get Alert Text |	Cho phép lấy nội dung văn bản (text content) của một hộp thoại cảnh báo (alert box) |

*Nhóm chức năng WINDOW*

| Action |	Chức năng (tool tip) |
| ----- | ----- |
| Get Window Handles |	Cho phép lấy danh sách các handle (xử lý) của tất cả các cửa sổ đang mở trên trình duyệt hiện tại |
| Switch to Window |	Cho phép chuyển đổi trình điều khiển sang một cửa sổ (window) khác hiện đang được mở trên trình duyệt thông qua tên của chúng |
| Switch to next Window |	Cho phép chuyển đổi trình điều khiển sang cửa sổ (window) tiếp theo được mở ra trên trình duyệt |
| Switch to Previous Window |	Cho phép chuyển đổi trình điều khiển sang cửa sổ (window) trước đó được mở ra trên trình duyệt |
| Select Window |	Sử dụng để chuyển đổi giữa các cửa sổ(window) trong danh sách các cửa sổ đang mở |
| Get Window handle |	Sử dụng để lấy, nhận diện id cửa sổ xử lý (window handle) của cửa sổ hiện hành |
| Close Window |	Đóng cửa sổ window đang mở hiện tại |

*Nhóm chức năng KHÁC*

| Action |	Chức năng (tool tip) |
| ----- | ----- |
| Go to URL |	Dùng để điều hướng và truy cập một trang Web/ ứng dụng/ hệ thống thông qua URL |
| Get URL |	Truy xuất và lấy địa chỉ URL hiện tại của trang Web/ ứng dụng/ hệ thống đang được mở bằng trình duyệt |
| Wait URL |	Sử dụng cho việc đợi cho đến khi trang web được mở với URL cụ thể nào đó |
| Start Application |	Sử dụng cho hành động bắt đầu hoặc khởi chạy một ứng dụng |
| Application Refresh |	Sử dụng để làm mới lại ứng dụng |
| Bring application Foreground |	Đưa ứng dụng lên trước |
| Execute Script |	Thực thi một mã JavaScript trên trình duyệt |
| Execute Script on Element |	Thực thi một mã JavaScript trên một phần tử cụ thể trên trình duyệt |
| Action Call |	Gọi đến 1 shared steps gồm một chuỗi các hành động thực hiện trên các phần tử |
| Wait Element Exists |	Sử dụng cho việc đợi hiển thị một Element khi thực hiện một thao tác hay một hành động |
| Child Element Wait Element |	Giống với Wait Element Exists nhưng chỉ áp dụng cho thẻ con của parentElement |
| Wait Element Disappear |	Sử dụng cho việc đợi một phần tử biến mất khỏi màn hình, thường dùng cho việc đợi icon Loading biến mất |
| Wait Repository Element Disappear |	Giống với Wait Element Disappear nhưng dùng cho phần tử có data type là RepositoryElement |

### COntrol

Control là cấu trúc điều khiển các hành động trên ứng dụng theo một điều kiện nào đó.

Sử dụng control khi cần thực hiện hành động có điều kiện hoặc phải lặp đi lặp lại trong testcase.

Control thường sử dụng kết hợp cùng các Operator

#### *IF-Else*

Là hàm điều kiện “Nếu … thì”

Sử dụng khi cần thực hiện một (hoặc một số) hành động bị ràng buộc bởi một (hoặc một số) **điều kiện** nhất định tuỳ thuộc yêu cầu của bài toán.

Kết hợp cùng các Operator ==, !=, <, >, AND/OR, matches, contains, ... làm điều kiện cho các action trong đó.

Cách sử dụng If-Else

![cont20](/test-framework-api/guest/doc-file/doc-file/582786e5-dc7e-48ca-9576-664710ed1fff/cont20.png)

Bước 1:	Thiết lập điều kiện cho If. Sử dụng các toán tử logic (AND, OR)

Bước 2:	Kéo thả chồng các toán tử quan hệ lên toán tử logic. 

![cont21](/test-framework-api/guest/doc-file/doc-file/520e4ddd-6917-4618-bf84-5914982312bd/cont21.png)

![cont22](/test-framework-api/guest/doc-file/doc-file/ccb2f72d-b37e-495b-bde5-75843f4c288b/cont22.png)

Bước 3: Nhập thông tin cho mỗi toán tử

![cont23](/test-framework-api/guest/doc-file/doc-file/a0479d6a-ace3-48c3-8afd-c66ce90ca544/cont23.png)

Bước 4: Cấu hình các hành động các bước bên trong if-else

![cont24](/test-framework-api/guest/doc-file/doc-file/3c9a7804-4e32-4871-8385-97e56e6379b6/cont24.png)

Bước 5: Click "Save" để lưu cấu hình

#### *ForEach*
Khai báo một biến chung kiểu dữ liệu của mảng, sử dụng biến đó duyệt các phần tử của mảng mà không cần lấy vị trí của mỗi phần tử.

Sử dụng khi cần lặp lại một (hoặc một số) hành động trong một mảng.

Cách sử dụng ForEach:

![cont25](/test-framework-api/guest/doc-file/doc-file/be78c5c2-b00c-4c3e-912a-affb9b6d82c1/cont25.png)

Bước 1: Khai báo biến chung cho mảng

![cont26](/test-framework-api/guest/doc-file/doc-file/e741d389-3bda-44f1-9cb9-7451e0f97726/cont26.png)

![cont27](/test-framework-api/guest/doc-file/doc-file/51e62d2f-a73b-4b2e-95fd-138f2544928c/cont27.png)

Bước 2: Nhập tên bảng


![cont24](/test-framework-api/guest/doc-file/doc-file/3c9a7804-4e32-4871-8385-97e56e6379b6/cont24.png)
![cont24](/test-framework-api/guest/doc-file/doc-file/3c9a7804-4e32-4871-8385-97e56e6379b6/cont24.png)


































